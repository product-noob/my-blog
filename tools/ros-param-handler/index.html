<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.11.2 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>rosparam_handler usage - Yu Zhang’s Homepage</title>
<meta name="description" content="There are two ways to set parameters in ROS. One is loading parameter value from yaml files to the parameter_server. It’s not flexible to adjust the values of parameters on parameter_server on the fly.The parameters are passed to your app classes by the private ros node handle. You have to create the variables in the class to hold these values.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Yu Zhang's Homepage">
<meta property="og:title" content="rosparam_handler usage">
<meta property="og:url" content="https://yuzhangbit.github.io/tools/ros-param-handler/">


  <meta property="og:description" content="There are two ways to set parameters in ROS. One is loading parameter value from yaml files to the parameter_server. It’s not flexible to adjust the values of parameters on parameter_server on the fly.The parameters are passed to your app classes by the private ros node handle. You have to create the variables in the class to hold these values.">







  <meta property="article:published_time" content="2018-04-19T00:00:00+08:00">





  

  


<link rel="canonical" href="https://yuzhangbit.github.io/tools/ros-param-handler/">







  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Yu Zhang",
      "url": "https://yuzhangbit.github.io",
      "sameAs": "https://yuzhangbit.github.io"
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Yu Zhang's Homepage Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->


<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KQ4PZJF');</script>
<!-- End Google Tag Manager -->

    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>rosparam_handler usage | Yu Zhang’s Homepage</title>
<meta name="generator" content="Jekyll v3.8.1" />
<meta property="og:title" content="rosparam_handler usage" />
<meta name="author" content="Yu Zhang" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="There are two ways to set parameters in ROS. One is loading parameter value from yaml files to the parameter_server. It’s not flexible to adjust the values of parameters on parameter_server on the fly. The parameters are passed to your app classes by the private ros node handle. You have to create the variables in the class to hold these values." />
<meta property="og:description" content="There are two ways to set parameters in ROS. One is loading parameter value from yaml files to the parameter_server. It’s not flexible to adjust the values of parameters on parameter_server on the fly. The parameters are passed to your app classes by the private ros node handle. You have to create the variables in the class to hold these values." />
<link rel="canonical" href="https://yuzhangbit.github.io/tools/ros-param-handler/" />
<meta property="og:url" content="https://yuzhangbit.github.io/tools/ros-param-handler/" />
<meta property="og:site_name" content="Yu Zhang’s Homepage" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-04-19T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@Yu Zhang" />
<script type="application/ld+json">
{"description":"There are two ways to set parameters in ROS. One is loading parameter value from yaml files to the parameter_server. It’s not flexible to adjust the values of parameters on parameter_server on the fly. The parameters are passed to your app classes by the private ros node handle. You have to create the variables in the class to hold these values.","author":{"@type":"Person","name":"Yu Zhang"},"@type":"BlogPosting","url":"https://yuzhangbit.github.io/tools/ros-param-handler/","headline":"rosparam_handler usage","dateModified":"2018-04-19T00:00:00+08:00","datePublished":"2018-04-19T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://yuzhangbit.github.io/tools/ros-param-handler/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body class="layout--single wide">
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KQ4PZJF"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/">Yu Zhang's Homepage</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="https://yuzhangbit.github.io/" >Home</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://yuzhangbit.github.io/videos/" >Videos</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://yuzhangbit.github.io/projects_index/" >Projects</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://yuzhangbit.github.io/blogs/" >Blogs</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://github.com/yuzhangbit" >Codes</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://yuzhangbit.github.io/publications/" >Publications</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="https://yuzhangbit.github.io/about/" >CV</a>
            </li>
          
        </ul>
        
        <button class="search__toggle" type="button">
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://yuzhangbit.github.io/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="/categories/#tools" itemprop="item"><span itemprop="name">Tools</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">rosparam_handler usage</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/my_bio_s.jpg" alt="Yu Zhang" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Yu Zhang</h3>
    
    
      <p class="author__bio" itemprop="description">
        PhD student @ IVRC at Beijing Institute of Technology, visiting student @ WAVELab at University of Waterloo.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Beijing, China</span>
        </li>
      

      
        <li>
          <a href="http://yuzhangbit.github.io" itemprop="url">
            <i class="fas fa-fw fa-link" aria-hidden="true"></i> Website
          </a>
        </li>
      

      
        <li>
          <a href="mailto:yu.zhang.bit@gmail.com">
            <meta itemprop="email" content="yu.zhang.bit@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/yuzhangbit" itemprop="sameAs">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      
        
          <li>
            <a href="https://www.youtube.com/user/UCsgiPR2CMjsWcrtFIXQS6EQ" itemprop="sameAs">
              <i class="fab fa-fw fa-youtube" aria-hidden="true"></i> YouTube
            </a>
          </li>
        
      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="rosparam_handler usage">
    <meta itemprop="description" content="There are two ways to set parameters in ROS. One is loading parameter value from yaml files to the parameter_server. It’s not flexible to adjust the values of parameters on parameter_server on the fly.The parameters are passed to your app classes by the private ros node handle. You have to create the variables in the class to hold these values.">
    <meta itemprop="datePublished" content="April 19, 2018">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">rosparam_handler usage
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>There are two ways to set parameters in ROS. One is loading parameter value from yaml files to the <a href="http://wiki.ros.org/Parameter%20Server">parameter_server</a>. It’s not flexible to adjust the values of parameters on parameter_server on the fly.
The parameters are passed to your app classes by the private ros node handle. You have to create the variables in the class to hold these values.</p>

<p>The second method is using <code class="highlighter-rouge">dynamic_reconfigure</code>. You define types of parameters in a python file. Then the <code class="highlighter-rouge">dynamic_reconfigure</code> tool will generate a header file that you can call directly. It seems like an interface file generated by IDL (Interface Definition Language) such as rosmsg and protobuf. You can adjust the values of parameters through the dynamic_reconfigure gui in rqt on the fly.
Thus the parameter_server sounds like a static configuration tool and dynamic_reconfigure is a dynamic configuration tool for parameters.</p>

<p>The <a href="https://github.com/cbandera/rosparam_handler">rosparam_handler</a> is a nice tool that unifies these two functionalities and makes these two types of parameters live in the same namespace to avoid redundancy.</p>

<p>The orignal tutorials did a great job in explaining the details in seperate tutorials. Here I want to present the necessary changes you need to do from a global perspective. Before diving into the details, please put the <code class="highlighter-rouge">rosparam_handler</code> package in your <code class="highlighter-rouge">catkin_ws/src</code> folder.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/cbandera/rosparam_handler
</code></pre></div></div>
<p><strong><em>Steps:</em></strong></p>
<ol>
  <li>
    <p>Define the parameter types and properties in the <code class="highlighter-rouge">cfg/Some.params</code> file. Note this file is used to generate header-only class that you can call. If you don’t have the <code class="highlighter-rouge">cfg</code> folder, just create one using <code class="highlighter-rouge">mkdir -p cfg</code> in your package root folder.</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">#!/usr/bin/env python</span>
 <span class="kn">from</span> <span class="nn">rosparam_handler.parameter_generator_catkin</span> <span class="kn">import</span> <span class="o">*</span>
 <span class="n">gen</span> <span class="o">=</span> <span class="n">ParameterGenerator</span><span class="p">()</span>
 <span class="n">gen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">"int_param"</span><span class="p">,</span> <span class="n">paramtype</span><span class="o">=</span><span class="s">"int"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"An Integer parameter"</span><span class="p">)</span>
 <span class="n">gen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">"double_param"</span><span class="p">,</span> <span class="n">paramtype</span><span class="o">=</span><span class="s">"double"</span><span class="p">,</span><span class="n">description</span><span class="o">=</span><span class="s">"A double parameter"</span><span class="p">)</span>
 <span class="n">gen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">"bool_param"</span><span class="p">,</span> <span class="n">paramtype</span><span class="o">=</span><span class="s">"bool"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"A Boolean parameter"</span><span class="p">)</span>
 <span class="n">gen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">"vector_param"</span><span class="p">,</span> <span class="n">paramtype</span><span class="o">=</span><span class="s">"std::vector&lt;double&gt;"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"A vector parameter"</span><span class="p">)</span>
 <span class="n">gen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">"map_param"</span><span class="p">,</span> <span class="n">paramtype</span><span class="o">=</span><span class="s">"std::map&lt;std::string,std::string&gt;"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"A map parameter"</span><span class="p">)</span>
 <span class="n">gen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">"configurable_parameter"</span><span class="p">,</span> <span class="n">paramtype</span><span class="o">=</span><span class="s">"double"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"This parameter can be set via dynamic_reconfigure"</span><span class="p">,</span> <span class="n">configurable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
 <span class="n">gen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s">"dummy"</span><span class="p">,</span> <span class="n">paramtype</span><span class="o">=</span><span class="s">"double"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"My Dummy parameter"</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
 <span class="n">edit_method</span><span class="o">=</span><span class="s">""</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">5.2</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">configurable</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
 <span class="n">global_scope</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">constant</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
 <span class="n">gen</span><span class="o">.</span><span class="n">add_enum</span><span class="p">(</span><span class="s">"my_enum"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"My first self written enum"</span><span class="p">,</span>
 <span class="n">entry_strings</span><span class="o">=</span><span class="p">[</span><span class="s">"Small"</span><span class="p">,</span> <span class="s">"Medium"</span><span class="p">,</span> <span class="s">"Large"</span><span class="p">,</span> <span class="s">"ExtraLarge"</span><span class="p">],</span> <span class="n">default</span><span class="o">=</span><span class="s">"Medium"</span><span class="p">)</span>
 <span class="nb">exit</span><span class="p">(</span><span class="n">gen</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="s">"package_name"</span><span class="p">,</span> <span class="s">"package_node"</span><span class="p">,</span> <span class="s">"name_of_this_file"</span><span class="p">))</span>
</code></pre></div>    </div>
    <p>In order to make this params file usable it must be executable, so lets use the following command to make it excecutable</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> chmod +x Some.params
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add <code class="highlighter-rouge">rosparam_handler</code> and <code class="highlighter-rouge">dynamic_reconfigure</code> as dependencies in package.xml.</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;depend&gt;</span>rosparam_handler<span class="nt">&lt;/depend&gt;</span>
 <span class="nt">&lt;depend&gt;</span>dynamic_reconfigure<span class="nt">&lt;/depend&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>Configure the CMakelists.txt for it.
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#########################</span>
  <span class="c">## step one</span>
  <span class="c">#########################</span>
  find_package<span class="o">(</span>catkin REQUIRED COMPONENTS rosparam_handler dynamic_reconfigure<span class="o">)</span>
  <span class="c"># include, let the generated files find the needed headers in catkin packages</span>
  include_directories<span class="o">(</span>
   include
   <span class="k">${</span><span class="nv">catkin_INCLUDE_DIRS</span><span class="k">}</span>
  <span class="o">)</span>
  <span class="c">#########################</span>
  <span class="c">## step two</span>
  <span class="c">#########################</span>
  <span class="c"># note that this command has to go before the catkin_package command.</span>
  generate_ros_paramter_files<span class="o">(</span>
   cfg/Some.params    <span class="c">## for generating parameters header files</span>
   <span class="c">#cfg/someCfgFile.cfg   ## for generating dynamic configuration files</span>
 <span class="o">)</span>
  <span class="c">#########################</span>
  <span class="c">## step three</span>
  <span class="c">#########################</span>
  catkin_package<span class="o">(</span>
   CATKIN_DEPENDS rosparam_handler dynamic_reconfigure
  <span class="o">)</span>
  <span class="c"># note: below commands are related to your own app.</span>
  add_executable<span class="o">(</span>example_excutable
   src/some.cpp<span class="o">)</span>
  target_link_libraries<span class="o">(</span>example_excutable
   <span class="k">${</span><span class="nv">some_libs</span><span class="k">}</span><span class="o">)</span>
  <span class="c">#########################</span>
  <span class="c">## step four</span>
  <span class="c">#########################</span>
  <span class="c"># add dependencies, note that this command should go after an example build command like above</span>
  add_dependencies<span class="o">(</span>example_executable <span class="k">${</span><span class="nv">PROJECT_NAME</span><span class="k">}</span>_genparam<span class="o">)</span> <span class="c">## To generate SomeParamters.h file</span>
  add_dependencies<span class="o">(</span>example_executable <span class="k">${</span><span class="nv">PROJECT_NAME</span><span class="k">}</span>_gencfg<span class="o">)</span> <span class="c">## To generate SomeConfig.h file</span>
</code></pre></div>    </div>
    <p>Once above steps done, you should be able to generate header-only classes for parameters or cfg to use.</p>

    <p>Note: you can’t actually find the generated header files in your package source folder. But you can see them in <code class="highlighter-rouge">catkin_ws/devel/include/package_name</code> for ROS or <code class="highlighter-rouge">cmake-build-debug/devel/include/package_name</code> for CLion like below</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> SomeParameters.h  # *Parameters.h, this file will hold a struct called &lt;name&gt;Paramters
 SomeConfig.h      # *Config.h, this file will hold the normal dynamic_reconfigure Config struct.
</code></pre></div>    </div>
  </li>
  <li>use the generated parameter struct in your ROS node class.
    <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">// include the header file</span>
 <span class="cp">#include "package_name/SomeParameters.h"
</span> <span class="c1">// declare the instance in your class as a member</span>
 <span class="n">package_name</span><span class="o">::</span><span class="n">SomeParameters</span> <span class="n">param_</span><span class="p">;</span>
</code></pre></div>    </div>
    <p>Initialize your parameters from the parameter_server (YAML file loader) via the private ROS node handle.</p>
    <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">MyNodeClass</span><span class="o">::</span><span class="n">MyNodeClass</span><span class="p">()</span>
   <span class="o">:</span> <span class="n">param_</span><span class="p">{</span><span class="n">ros</span><span class="o">::</span><span class="n">NodeHandle</span><span class="p">(</span><span class="s">"~"</span><span class="p">)}</span> <span class="c1">// use the private node handle. Please use getPrivateNodeHandle() for nodelets</span>
   <span class="p">{</span>
     <span class="k">this</span><span class="o">-&gt;</span><span class="n">param_</span><span class="p">.</span><span class="n">fromParamServer</span><span class="p">();</span>
   <span class="p">}</span>
</code></pre></div>    </div>

    <p>The <code class="highlighter-rouge">parameter_server</code> does not create these values of parameter from nowhere. It actually loads these values from the YAML file through the roslaunch system as follows.</p>

    <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;?xml version="1.0"?&gt;</span>
 <span class="nt">&lt;launch&gt;</span>
     <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">"config"</span> <span class="na">default=</span><span class="s">"$(find package_name)/launch/demo_params.yaml"</span> <span class="nt">/&gt;</span>

     <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">"package_name"</span> <span class="na">type=</span><span class="s">"executable_type"</span> <span class="na">name=</span><span class="s">"node_name"</span> <span class="na">args=</span><span class="s">""</span> <span class="na">output=</span><span class="s">"screen"</span> <span class="nt">&gt;</span>
         <span class="nt">&lt;rosparam</span> <span class="na">command=</span><span class="s">"load"</span> <span class="na">file=</span><span class="s">"$(arg config)"</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;/node&gt;</span>
 <span class="nt">&lt;/launch&gt;</span>
</code></pre></div>    </div>
    <p>The YMAL file may look like this.</p>
    <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">int_param</span><span class="pi">:</span> <span class="s">1</span>
 <span class="na">double_param</span><span class="pi">:</span> <span class="s">12.2</span>
 <span class="na">bool_param</span><span class="pi">:</span> <span class="s">True</span>
 <span class="na">vector_param</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">1.0</span><span class="pi">,</span> <span class="nv">2.0</span><span class="pi">,</span> <span class="nv">3.4</span><span class="pi">]</span>
 <span class="na">map_param</span><span class="pi">:</span> <span class="pi">{</span><span class="s2">"</span><span class="s">a"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">b"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">c"</span><span class="pi">:</span> <span class="s2">"</span><span class="s">d"</span><span class="pi">}</span>
 <span class="na">weight</span><span class="pi">:</span> <span class="s">2.3</span>
 <span class="na">age</span><span class="pi">:</span> <span class="s">1</span>
 <span class="na">configurable_parameter</span><span class="pi">:</span> <span class="s">10.</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>handy tool for modifying parameters on the fly.</p>

    <p>We are not done yet. If you define a parameter as a configurable object, then you can modity it on the fly just like the normal dynamic_reconfigure config parameter through rqt. You need to create a dynamic reconfiguration server to enable this feature.</p>

    <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">#include &lt;dynamic_reconfigure/server.h&gt;
</span>
 <span class="k">class</span> <span class="nc">MyNodeClass</span> <span class="p">{</span>
 <span class="k">private</span><span class="o">:</span>
   <span class="c1">// dynamic reconfigure,</span>
   <span class="c1">// the Package_name::SomeConfig is generated automatically</span>
   <span class="n">dynamic_reconfigure</span><span class="o">::</span><span class="n">Server</span><span class="o">&lt;</span><span class="n">package_name</span><span class="o">::</span><span class="n">SomeConfig</span><span class="o">&gt;</span> <span class="n">reconfigSrv_</span><span class="p">;</span> <span class="c1">// Dynamic reconfiguration service</span>
   <span class="c1">// define the callback</span>
   <span class="kt">void</span> <span class="n">reconfigureRequest</span><span class="p">(</span><span class="n">package_name</span><span class="o">::</span><span class="n">SomeConfig</span><span class="o">&amp;</span><span class="p">,</span> <span class="kt">uint32_t</span><span class="p">);</span>
 <span class="p">}</span>
</code></pre></div>    </div>
    <p>The inplementation:</p>
    <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kt">void</span> <span class="n">MyNodeClass</span><span class="o">::</span><span class="n">reconfigureRequest</span><span class="p">(</span><span class="n">package_name</span><span class="o">::</span><span class="n">SomeConfig</span><span class="o">&amp;</span><span class="p">,</span> <span class="n">uint</span>
   <span class="mi">32</span><span class="n">_t</span> <span class="n">level</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">this</span><span class="o">-&gt;</span><span class="n">param_</span><span class="p">.</span><span class="n">fromConfig</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
 <span class="p">}</span>
</code></pre></div>    </div>
    <p>Set the callback function to let <code class="highlighter-rouge">dynamic_reconfigure</code> to modify the parameters.</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> reconfigSrv_.setCallback(boost::bind(&amp;MyNodeClass::reconfigureRequest, this, _1, _2));
</code></pre></div>    </div>

    <p>Here is what a rqt gui for dynamic_reconfigure looks like.</p>

    <p><img src="/assets/images/rosparam_handler.png" alt="rqt" /></p>

    <p>Enjoy!</p>
  </li>
</ol>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#programming" class="page__taxonomy-item" rel="tag">Programming</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#ros" class="page__taxonomy-item" rel="tag">ROS</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#tools" class="page__taxonomy-item" rel="tag">Tools</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-04-19T00:00:00+08:00">April 19, 2018</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=rosparam_handler+usage%20https%3A%2F%2Fyuzhangbit.github.io%2Ftools%2Fros-param-handler%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fyuzhangbit.github.io%2Ftools%2Fros-param-handler%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https%3A%2F%2Fyuzhangbit.github.io%2Ftools%2Fros-param-handler%2F" class="btn btn--google-plus" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Google Plus"><i class="fab fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fyuzhangbit.github.io%2Ftools%2Fros-param-handler%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/tools/python-binding/" class="pagination--pager" title="Python binding
">Previous</a>
    
    
      <a href="/tools/supervisor_setting/" class="pagination--pager" title="Automatically host a gollum wiki with the supervisor
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Leave a Comment</h4>
      <section class="fb-comments" data-href="https://yuzhangbit.github.io/tools/ros-param-handler/" data-mobile="true" data-num-posts="10" data-width="100%" data-colorscheme="dark"></section>
    
</div>
    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/default_teaser.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/tools/nvidia-driver-and-cuda9-installation/" rel="permalink">Nvidia Driver and Cuda9.0 Installation
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  8 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Tested hardware and OS configuration:

  OS: Ubuntu 16.04 LTS
  NVIDIA Graphic Card: Quadro M1000M
  Cuda Version: 9.0
  Graphic Card Driver Version: 410.xx
...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/default_teaser.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/tools/use-apt-get-behind-socks5-proxy/" rel="permalink">Use apt-get behind a socks5 proxy
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Nothing would be more frustrating than to install apt packages from sources outside of China, especially from PPA.
If you try to update the c++ compiler to g...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/default_teaser.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/tools/porting-apollo/" rel="permalink">Using Apollo Algorithms in Your Normal ROS Package
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">This blog will introduce how the port_apollo repository converts an apollo module to a normal ROS package and uses Apollo algorithms in your own ros package ...</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/assets/images/default_teaser.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/tools/several-ways-of-writing-a-ros-node/" rel="permalink">Several Ways of Writing a ROS Node
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">The design of nodes varies according to the requirements of different applications. Selecting the right node pattern is pretty important for achieving certai...</p>
  </article>
</div>
        
      </div>
    </div>
  
  
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><input type="text" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    <div id="results" class="results"></div></div>
      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
    
    
    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Yu Zhang. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-118867307-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-118867307-1', { 'anonymize_ip': false});
</script>






    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
  



  </body>
</html>
